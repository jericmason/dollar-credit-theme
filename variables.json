{
  "title": "root",
  "type": "object",
  "properties": {
    "shareMessaging": {
      "title": "Share Messaging",
      "type": "object",
      "properties": {
        "emailShareSubject": {
          "type": "string",
          "description": "Email share subject",
          "minLength": 4,
          "default": "Get {{companyName}} for {{programDetails.referredRewardDetails.discountPercent}}% less!"
        },
        "emailShareBody": {
          "type": "string",
          "description": "Email share body",
          "minLength": 4,
          "default": "Sign up for a {{companyName}} account and we both get {{programDetails.referredRewardDetails.discountPercent}}% off our monthly bill. Use this link {{shareLinks.emailShareLink}}"
        },
        "facebookShareSubject": {
          "type": "string",
          "description": "Facebook share subject",
          "minLength": 4,
          "default": "Get {{companyName}} for {{programDetails.referredRewardDetails.discountPercent}}% less!"
        },
        "facebookShareBody": {
          "type": "string",
          "description": "Facebook share subject",
          "minLength": 4,
          "default": "Sign up for a {{companyName}} account and we both get {{programDetails.referredRewardDetails.discountPercent}}% off our monthly bill. Use this link {{shareLinks.facebookShareLink}}"
        },
        "twitterShareBody": {
          "type": "string",
          "description": "Twitter share body",
          "minLength": 4,
          "default": "Sign up for a {{companyName}} account and we both get {{programDetails.referredRewardDetails.discountPercent}}% off our monthly bill. Use this link {{shareLinks.twitterShareLink}}"
        }
      },
      "required": ["emailShareBody", "emailShareSubject", "facebookShareSubject", "facebookShareBody", "twitterShareBody"]
    },
    "widgetCustomization": {
      "title": "Customize Referral Widget",
      "type": "object",
      "properties": {
        "widgetFont": {
          "type": "string",
          "title": "Widget Font:",
          "default": "\"Helvetica Neue\",Helvetica,Arial,sans-serif",
          "enum": [
            "\"Helvetica Neue\",Helvetica,Arial,sans-serif",
            "'Lato',sans-serif",
            "'Times New Roman'",
            "Arial",
            "Courier",
            "Tahoma",
            "Verdana",
            "Georgia"
          ],
          "options": {
            "enum_titles": [
              "Helvetica Neue",
              "Lato",
              "Times New Roman",
              "Arial",
              "Courier",
              "Tahoma",
              "Verdana",
              "Georgia"
            ]
          }
        },
        "headerColor": {
          "type": "string",
          "format": "text",
          "minLength": 1,
          "title" : "Heading Text Color (hex code):",
          "default" : "#4486E1",
          "options": {
            "validate": ["hex-color"]
          }
        },
        "heading": {
          "type": "string",
          "minLength": 1,
          "format": "textarea",
          "title": "Heading Text:",
          "default" : "Give {{programDetails.referredRewardDetails.discountPercent}}% off and Get {{programDetails.referrerRewardDetails.discountPercent}}% off!",
          "options": {
            "input_height": "100px",
            "validate": ["handlebars"]
          }
        },
        "headerDetails": {
          "type": "string",
          "minLength": 1,
          "format": "textarea",
          "title": "Body Text:",
          "default" : "Share {{programDetails.referredRewardDetails.discountPercent}}% off {{companyName}} and receive {{programDetails.referrerRewardDetails.discountPercent}}% off your monthly bill when they pay their first bill.",
          "options": {
            "input_height": "100px",
            "validate": ["handlebars"]
          }
        },
        "shareCodeDetails": {
          "type": "string",
          "format": "textarea",
          "title": "Call To Action Text",
          "default": "Share the link below or use the code {{user.referralCode}}",
          "options": {
            "input_height": "100px",
            "validate": ["handlebars"]
          }
        }
      }
    },
    "email": {
      "type": "object",
      "properties": {
        "REFERRER_REWARD_LIMIT_REACHED": {
          "type": "object",
          "properties": {
            "configuration" : {
	            "allOf" : [
   	              {
	                "properties" : {
                      "subject" : {
		                "default": "You have reached max level!"
	                  }
	                }
	              },
	              { "$ref" : "#/definitions/emailConfiguration" }
	            ]
	        },
            "themeMapping": { "default": "emails/referrer-reward-limit" }
          }
        },
        "REFERRAL_CONVERTED": {
          "type": "object",
          "properties": {
            "configuration" : {
	            "allOf" : [
   	              {
	                "properties" : {
                      "subject" : {
		                "default": "{{convertedReferral.referredUser.firstName}} has converted!"
	                  }
	                }
	              },
	              { "$ref" : "#/definitions/emailConfiguration" }
	            ]
	        },
            "themeMapping": { "default": "emails/referral-converted" }
          }
        },
        "REFERRAL_STARTED": {
          "type": "object",
          "properties": {
            "configuration" : {
	            "allOf" : [
   	              {
	                "properties" : {
                      "subject" : {
		                "default": "{{newReferral.referredUser.firstName}} signed up!"
	                  }
	                }
	              },
	              { "$ref" : "#/definitions/emailConfiguration" }
	            ]
	        },
            "themeMapping": { "default": "emails/referral-converted" }
          }
        }
      } 
    }
  },
  "definitions": {
    "emailConfiguration" : {
      "type": "object",
      "title": "Email Defaults",
      "properties": {
        "fromName": {
          "type": "string",
          "title": "From Name",
          "default": "test@saaquat.ch"
        },
        "fromAddress": {
          "type": "string",
          "title": "From Address",
          "default": "{{companyName}}"
        },
        "subject": {
          "type": "string",
          "title": "Subject",
          "format": "textarea",
          "default": "Referral Update",
          "options": {
            "input_height": "50px"
          } 
        }
      }
    }
  },
  "required": ["shareMessaging", "widgetCustomization", "email"]
}
